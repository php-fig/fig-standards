基本编码标准
=====================

标准的本章节包含了在共享的PHP代码中，要保证高级别的技术互用性所应该考虑到的标准编码元素。

本文档中的关键字“必须”， “不允许”，“必需”，“将会”，“将不会”，“应该”，“不应该”，“推荐”，“可以”和“可选”遵循[RFC 2119]中的描述。

[RFC 2119]: http://www.ietf.org/rfc/rfc2119.txt
[PSR-0]: https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md
[PSR-4]: https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-4-autoloader.md


1. 概述
-----------

- 文件必须仅使用`<?php`和`<?=`标签。

- PHP代码文件必须仅使用UTF-8无BOM的编码方式。

- 同一个文件应该只用来做符号声明（类，函数，常来等等）或者影响程序行为（例如生成输出，修改.ini配置），但是不应该两者都做。

- 命名空间和类必须遵循“自动加载标准” PSR: [[PSR-0], [PSR-4]]。

- 类名必须以`大驼峰拼写法`方式声明。

- 类常量的声明必须全部为大写字母和下划线。

- 方法名必须以`小骆驼拼写法`命名。


2. 文件
--------

### 2.1. PHP 标签

PHP代码必须使用 `<?php ?>` 标签或者 `<?= ?>` 标签； 不允许使用其它标签变体。

### 2.2. 字符编码

PHP代码必须仅使用UTF-8无BOM的编码格式。

### 2.3. 行为影响

一个文件应该用于声明新的符号（类，函数，常量等），并且不会影响程序行为，
或者应该用于执行影响程序行为的逻辑，但是不应该两者都具有。

术语“影响行为”意味着执行逻辑不能直接与类、函数、常量等的声明相关联，*仅仅通过文件包含相关联*。

“影响行为”包含但是并不局限与：生成输出，显式的使用`require`或者`include`，
连接外部服务，修改ini配置，产生错误或者异常，修改全局或者静态的变量，对文件进行读写等等。

下面是一个同一个文件中包含声明和影响行为的代码的例子，应该避免这种代码:

```php
<?php
// 行为影响: 修改ini配置
ini_set('error_reporting', E_ALL);

// 行为影响: 载入一个文件
include "file.php";

// 行为影响: 生成输出
echo "<html>\n";

// 声明
function foo()
{
    // 函数体
}
```

下面是一个只包含声明，但是不包含影响行为的的例子：

```php
<?php
// 声明
function foo()
{
    // 函数体
}

// 条件声明 *不是* 行为影响
if (! function_exists('bar')) {
    function bar()
    {
        // 函数体
    }
}
```


3. 命名空间和类名
----------------------------

命名空间和类必须遵循“自动加载标准” PSR：[[PSR-0], [PSR-4]]。

这意味着每一个类单独一个文件，并且命名空间至少要有一级：顶级厂商名称。

类名必须以`大驼峰拼写法`命名。

在PHP 5.3及之后的代码必须使用正式的命名空间。

例如:

```php
<?php
// PHP 5.3 and later:
namespace Vendor\Model;

class Foo
{
}
```

在PHP 5.2.x和之前写的代码应该使用以`Vendor_`为前缀的伪命名空间惯例。

```php
<?php
// PHP 5.2.x and earlier:
class Vendor_Model_Foo
{
}
```

4. 类常量，属性和方法
-------------------------------------------

术语“类”指的是所有的类，接口和Traits。

### 4.1. 常量

类常量必须仅使用大写字母和下划线进行声明。
例如:

```php
<?php
namespace Vendor\Model;

class Foo
{
    const VERSION = '1.0';
    const DATE_APPROVED = '2012-06-01';
}
```

### 4.2. 属性

本文档有意的避免给出除了`大驼峰拼写法`，`小驼峰拼写法`或者`小写下划线`之外的任何建议。

无论使用何种命名惯例，都应该始终如一的在一个合理的范围内使用。
这个范围可能是厂商级别，包级别，类级别或者是方法级别。

### 4.3. 方法

方法名必须以`小写驼峰拼写法`声明。
